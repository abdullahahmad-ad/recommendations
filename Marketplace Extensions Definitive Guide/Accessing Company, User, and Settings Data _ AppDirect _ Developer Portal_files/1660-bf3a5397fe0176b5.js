"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1660,3936],{8842:(e,a,t)=>{let i,l,n,s,r,o,d,c,u,m;t.d(a,{C:()=>T});var p=t(39032),h=t(23464);let L=async(e,a,t,i,l,n,s,r)=>{try{let o=await h.A.post("/api/v1/video/generate",{message:e,voiceId:a,videoModel:l,idleVideo:i,aiImage:n,voiceEngine:s}),d=performance.now();if(t.onended=()=>{let e=performance.now()-d;g(Math.ceil(e/1e3),l),r(!1)},"aniportrait"===l){t.autoplay=!1,t.src=o.data.video;let e=new Audio(o.data.audio);t.play(),e.play()}else r(!0),t.src=o.data;t.loop=!1}catch(e){return console.error("Video generation failed",e),e}},g=(e,a)=>{let t;"did"===a?t="D_ID_SECONDS":"wav2lip"===a?t="WAV2LIP_SECONDS":"dreamtalk"===a&&(t="DREAMTALK_SECONDS"),t&&fetch("/api/v1/usage/media",{method:"POST",body:JSON.stringify({duration:e,type:t})})},x=()=>{},v=()=>{console.log("iceGatheringState",i.iceGatheringState)},f=e=>{if(e.candidate){let{candidate:a,sdpMid:t,sdpMLineIndex:i}=e.candidate;fetch("https://api.d-id.com/talks/streams/".concat(l,"/ice"),{method:"POST",headers:{Authorization:"Basic ".concat(p._.dIdKey()),"Content-Type":"application/json"},body:JSON.stringify({candidate:a,sdpMid:t,sdpMLineIndex:i,session_id:n})})}};function b(e){e.track&&(r=setInterval(async()=>{i&&(await i.getStats(e.track)).forEach(a=>{if("inbound-rtp"===a.type&&"video"===a.mediaType){if(o!==a.bytesReceived>d){let l;var t=o=a.bytesReceived>d,i=e.streams[0];t?(l="streaming",m=performance.now(),x(!0),i&&c&&(c.srcObject=i,c.loop=!1,c.paused&&c.play().then(e=>{}).catch(e=>{}))):(m&&(g(Math.ceil((performance.now()-m)/1e3),"did"),m=void 0),l="empty",x(!1)),console.log("streaming status changed to",l)}d=a.bytesReceived}})},500))}let w=()=>{(null==c?void 0:c.srcObject)&&(console.log("stopping video streams"),c.srcObject.getTracks().forEach(e=>e.stop()),c.srcObject=null)},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;e&&(e.close(),e.removeEventListener("icegatheringstatechange",v,!0),e.removeEventListener("icecandidate",f,!0),e.removeEventListener("iceconnectionstatechange",C,!0),e.removeEventListener("connectionstatechange",j,!0),e.removeEventListener("signalingstatechange",S,!0),e.removeEventListener("track",b,!0),clearInterval(r),e===i&&(i=null))};function C(){console.log("iceConnectionState",null==i?void 0:i.iceConnectionState),((null==i?void 0:i.iceConnectionState)==="failed"||(null==i?void 0:i.iceConnectionState)==="disconnected"||(null==i?void 0:i.iceConnectionState)==="closed")&&(w(),y())}function j(){console.log("connectionState",null==i?void 0:i.connectionState)}function S(){console.log("signalingState",null==i?void 0:i.signalingState)}async function A(e,a){i||((i=new RTCPeerConnection({iceServers:a})).addEventListener("icegatheringstatechange",v,!0),i.addEventListener("icecandidate",f,!0),i.addEventListener("iceconnectionstatechange",C,!0),i.addEventListener("connectionstatechange",j,!0),i.addEventListener("signalingstatechange",S,!0),i.addEventListener("track",b,!0)),await i.setRemoteDescription(e);let t=await i.createAnswer();return await i.setLocalDescription(t),t}let E=async(e,a,t,r)=>{if(i&&"connected"===i.connectionState)return;w(),y(),e&&(u=e),a&&(c=a),r&&(x=r);let o=await fetch("https://api.d-id.com/talks/streams",{method:"POST",headers:{Authorization:"Basic ".concat(p._.dIdKey()),"Content-Type":"application/json"},body:JSON.stringify({source_url:u})});if(451===o.status)throw Error("Unfortunately this avatar cannot be animated due to legal restrictions");let{id:d,offer:m,ice_servers:h,session_id:L}=await o.json();l=d,n=L;try{s=await A(m,h),await fetch("https://api.d-id.com/talks/streams/".concat(d,"/sdp"),{method:"POST",headers:{Authorization:"Basic ".concat(p._.dIdKey()),"Content-Type":"application/json"},body:JSON.stringify({answer:s,session_id:n})})}catch(e){console.log("error during streaming setup",e),w(),y();return}},N=async(e,a,t,s,r,o)=>{c=t,((null==i?void 0:i.signalingState)!=="stable"||(null==i?void 0:i.iceConnectionState)!=="connected")&&await E(s.src,t,s.profile.idleVideo,o),await fetch("https://api.d-id.com/talks/streams/".concat(l),{method:"POST",headers:{Authorization:"Basic ".concat(p._.dIdKey()),"Content-Type":"application/json"},body:JSON.stringify({script:{type:"text",subtitles:"false",provider:{type:r,voice_id:a},ssml:"false",input:e},driver_url:"bank://lively/",config:{stitch:!0},session_id:n})})};var M=t(72571),k=t(87700);let T=(0,t(65453).v)((e,a)=>({isOpen:!1,isPlaying:!1,isMuted:!1,videoId:"",voice:"en-US-JennyNeural",size:"sm",videoModel:"did",ref:void 0,idleVideo:"",voiceEngine:"microsoft",onOpen:async t=>{var i,l,n,s,r,o;if(e({isOpen:!0,ai:t,voice:(null==t||null==(i=t.profile)?void 0:i.voice)||"en-US-JennyNeural",videoModel:(null==t||null==(l=t.profile)?void 0:l.videoModel)||"did",voiceEngine:(null==t||null==(n=t.profile)?void 0:n.voiceEngine)||"microsoft",idleVideo:(null==t||null==(s=t.profile)?void 0:s.idleVideo)||"",error:""}),!(null==t||null==(r=t.profile)?void 0:r.videoModel)||(null==t||null==(o=t.profile)?void 0:o.videoModel)==="did"){let{ref:i,idleVideo:l}=a();try{await E(t.src,i,l,a=>e({isPlaying:a}))}catch(a){e({error:a.message||"Something went wrong"})}}},onSpeak:async t=>{if(!t)return;let{isOpen:i,videoModel:l,voice:n,ref:s,ai:r,voiceEngine:o}=a();if(i){if("did"===l)return void await N(t,n,s,r,o,a=>e({isPlaying:a}));if("voice"===l){"elevenlabs"===o&&await (0,M.ap)(t,n),"microsoft"===o&&await (0,k.fJ)(t,n);return}l&&s&&await L(t,n,s,r.profile.idleVideo,l,r.src,o,a=>e({isPlaying:a}))&&e({isOpen:!1})}},onClose:()=>e({isOpen:!1,idleVideo:"",isPlaying:!1,isMuted:!1,error:""}),onVoiceChange:async t=>{e({voice:t});let i=a().ai.id;await h.A.put("/api/v1/super/video/".concat(i,"/profile"),{voice:t})},onVideoModelChange:async t=>{e({videoModel:t});let{ai:i}=a();await h.A.put("/api/v1/super/video/".concat(i.id,"/profile"),{videoModel:t})},onVideoRefChange:a=>{e({ref:a})},onIdleVideoChange:async a=>{e({idleVideo:a})},onVoiceEngineChange:async t=>{"elevenlabs"===t&&e({voice:"29vD33N1CtxCmqQRPOHJ"}),"microsoft"===t&&e({voice:"en-US-JennyNeural"}),e({voiceEngine:t});let i=a().ai.id;await h.A.put("/api/v1/super/video/".concat(i,"/profile"),{voiceEngine:t})},onPlayingChange:a=>{e({isPlaying:a})},onMuteToggle:()=>{let{isMuted:t,ref:i}=a();i&&(i.muted=!t),e({isMuted:!t})}}))},25642:(e,a,t)=>{t(967),t(64440)},31660:(e,a,t)=>{t.d(a,{ChatClient:()=>ep});var i=t(95155),l=t(87109),n=t(77487),s=function(e){return e.IMAGE_GENERATION="image_generation",e.WEB_SEARCH="web_search",e.PYTHON="python",e.MEMORY="memory",e}({}),r=t(11276),o=t(41533),d=t(59434),c=t(69604),u=t(56231),m=t(47780),p=t(27361),h=t(58887),L=t(49077),g=t(8141),x=t(70112),v=t(81001),f=t(93751),b=t(70058),w=t(41954),y=t(60266),C=t(21220),j=t(66121),S=t(21770),A=t(26761),E=t(15763),N=t(80655),M=t(91423),k=t(6942),T=t(25427),P=t(35754),I=t(40851),R=t(23464),z=t(31470),O=t(64440),D=t(51362),U=t(55028),B=t(12115),F=t(967),G=t(90621),_=t(52658);let V=(0,U.default)(()=>t.e(6305).then(t.bind(t,26305)),{loadableGenerated:{webpack:()=>[26305]},ssr:!1});var J=function(e){return e[e.NONE=0]="NONE",e[e.UPLOADING=1]="UPLOADING",e[e.COMPLETE=2]="COMPLETE",e[e.ERROR=3]="ERROR",e}(J||{});let H=(0,B.memo)(function(e){var a,t,U,J,H,Y,W,K;let{orgId:Q,chatId:q,alignBottom:X,ai:Z,createChat:$,onSubmit:ee,isLoading:ea,featureFlags:et,disabled:ei,cancelResponse:el,modelId:en,setModelId:es,orgSettings:er,memory:eo}=e,[ed,ec]=(0,B.useState)([]),eu=(0,B.useRef)(null),{models:em,fetchModels:ep}=(0,n.G)(),{theme:eh}=(0,D.useTheme)(),[eL,eg]=(0,B.useState)(""),ex=(0,B.useRef)(null),[ev,ef]=(0,B.useState)(!Z),[eb,ew]=(0,B.useState)(!Z),[ey,eC]=(0,B.useState)(),[ej,eS]=(0,B.useState)(1),[eA,eE]=(0,B.useState)(),[eN,eM]=(0,B.useState)(),[ek,eT]=(0,B.useState)(),[eP,eI]=(0,B.useState)(),eR=(0,B.useMemo)(()=>0===em.filter(e=>e.capabilities.image.output).filter(e=>!e.isDisabled).length,[em]),ez=(0,B.useMemo)(()=>em.find(e=>e.id===ey),[em,ey]),eO=(0,B.useMemo)(()=>em.find(e=>e.id===(Z?Z.modelId:en)),[em,Z,en]),eD=(0,B.useMemo)(()=>[...new Set([...(null==eO?void 0:eO.capabilities.image.inputFormats)||[],...(null==eO?void 0:eO.capabilities.audio.supportsFormats)||[],...(null==eO?void 0:eO.capabilities.video.supportsFormats)||[],...(null==eO?void 0:eO.capabilities.document.supportsFormats)||[]])],[eO]);(0,B.useEffect)(()=>{em.length>0||ep()},[ep,em]);let eU=(0,B.useCallback)(e=>{let a=[];if(a.push({type:s.PYTHON}),eo&&a.push({type:s.MEMORY}),ev&&(null==eO?void 0:eO.capabilities.webSearch)&&a.push({type:s.WEB_SEARCH}),eb&&(null==eO?void 0:eO.capabilities.toolCalling)&&a.push({type:s.IMAGE_GENERATION,modelId:null==ez?void 0:ez.id,samples:ej,size:eA,aspectRatio:eN,quality:ek,style:eP}),0===ed.length){ee(e,a),eg("");return}let t=[];t.push({type:r.h2.TEXT,text:e}),t.push(...ed.filter(e=>{let[a,t]=e;return 2===t.state}).map(e=>{let[a,t]=e;return(0,F.YW)(a.type).with(F.P.when(e=>{var a;return null==eO||null==(a=eO.capabilities.image.inputFormats)?void 0:a.includes(e)}),()=>({type:r.h2.IMAGE,url:t.url,mimeType:a.type,metadata:{filename:a.name}})).with(F.P.when(e=>{var a;return null==eO||null==(a=eO.capabilities.audio.supportsFormats)?void 0:a.includes(e)}),()=>({type:r.h2.AUDIO,url:t.url,mimeType:a.type,metadata:{filename:a.name}})).with(F.P.when(e=>{var a;return null==eO||null==(a=eO.capabilities.video.supportsFormats)?void 0:a.includes(e)}),()=>({type:r.h2.VIDEO,url:t.url,mimeType:a.type,metadata:{filename:a.name}})).with(F.P.when(e=>{var a;return null==eO||null==(a=eO.capabilities.document.supportsFormats)?void 0:a.includes(e)}),()=>({type:r.h2.DOCUMENT,url:t.url,mimeType:a.type,metadata:{filename:a.name}})).otherwise(()=>{throw Error("Unsupported file type: ".concat(a.type))})})),ee(t,a),eg(""),ec([])},[ed,ee,eO,ev,eb,ez,ej,eA,ek,eP,eN,eo]),eB=(0,B.useMemo)(()=>ed.every(e=>{let[a,t]=e;return 2===t.state||3===t.state}),[ed]),eF=(0,B.useCallback)(e=>{ec(a=>a.map(a=>{let[t,i]=a;return i.id==e.id?[t,e]:[t,i]}))},[]),eG=(0,B.useMemo)(()=>ed.map((e,a)=>{let[t,n]=e,s=URL.createObjectURL(t);return(0,i.jsxs)(c.Box,{pos:"relative",className:"group",children:[(0,F.YW)(n.state).with(F.P.union(0,1),()=>(0,i.jsx)(u.Overlay,{radius:"md",center:!0,children:(0,i.jsx)(m.RingProgress,{size:30,thickness:3,roundCaps:!0,sections:[{value:n.percentage||0,color:"blue"}],transitionDuration:250})})).with(3,()=>(0,i.jsx)(u.Overlay,{radius:"md",center:!0,children:(0,i.jsx)(p.Tooltip,{label:"An error occurred, please remove and try again.",withArrow:!0,children:(0,i.jsx)(h.Text,{c:"red",children:(0,i.jsx)(T.sFm,{className:"w-8 h-8"})})})})).otherwise(()=>null),(0,i.jsx)(p.Tooltip,{label:t.name,openDelay:500,position:"bottom",offset:8,transitionProps:{transition:"fade",duration:250},children:(0,F.YW)(t.type).with(F.P.when(e=>e.startsWith("image")),()=>(0,i.jsx)(c.Box,{className:"border-inputBorder border rounded-[10px] p-[1.5] hover:bg-active",w:60,h:60,children:(0,i.jsx)(L.Image,{src:s,radius:"md",onLoad:()=>URL.revokeObjectURL(s),draggable:!1,alt:t.name,className:"object-fill w-full h-full cursor-zoom-in",onClick:()=>{let e=URL.createObjectURL(t),a=(0,M.openContextModal)({transitionProps:{transition:"fade"},padding:0,returnFocus:!1,radius:"md",modal:"previewImage",withCloseButton:!1,onClose:()=>{var e;return null==(e=eu.current)?void 0:e.focus()},innerProps:{image:(0,i.jsx)(L.Image,{radius:"md",src:e,alt:t.name,onClick:()=>(0,M.closeModal)(a),onLoad:()=>URL.revokeObjectURL(e)})},centered:!0,size:"auto"})}})})).with(F.P.when(e=>e.startsWith("audio")),()=>(0,i.jsx)(c.Box,{className:"border-inputBorder border rounded-[10px] p-[1.5] hover:bg-active",w:60,h:60,children:(0,i.jsx)(g.Center,{h:"100%",children:(0,i.jsx)(T.aUy,{})})})).with(F.P.when(e=>e.startsWith("video")),()=>(0,i.jsx)(c.Box,{className:"border-inputBorder border rounded-[10px] p-[1.5] hover:bg-active",w:60,h:60,children:(0,i.jsx)(g.Center,{h:"100%",children:(0,i.jsx)(T.aI2,{})})})).with(F.P.when(e=>{var a;return null==eO||null==(a=eO.capabilities.document.supportsFormats)?void 0:a.includes(e)}),()=>(0,i.jsx)(c.Box,{w:180,h:60,className:"border-inputBorder border rounded-[10px] p-[1.5] hover:bg-active",children:(0,i.jsxs)(x.Group,{h:"100%",gap:8,children:[(0,i.jsx)(c.Box,{h:"100%",className:"rounded-l-[8px] bg-message",c:"dimmed",children:(0,i.jsx)(g.Center,{h:"100%",w:55,children:l.D[t.type]||(0,i.jsx)(T.x6$,{})})}),(0,i.jsx)(c.Box,{h:"100%",className:"flex items-center justify-start flex-1 min-w-0",children:(0,i.jsx)(h.Text,{size:"sm",lineClamp:1,style:{userSelect:"none"},children:t.name})})]})})).otherwise(()=>(0,i.jsx)(c.Box,{className:"border-inputBorder border rounded-[10px] p-[1.5] hover:bg-active",w:60,h:60,children:(0,i.jsx)(g.Center,{h:"100%",children:(0,i.jsx)(T.r0c,{})})}))}),(0,i.jsx)(p.Tooltip,{label:"Remove",children:(0,i.jsx)(v.ActionIcon,{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-100",pos:"absolute",right:-10,top:-10,variant:"default",radius:"xl",size:"sm",style:{zIndex:1e3},onClick:()=>{if(n.abort&&n.abort.abort(),n.url){let e=new URL(n.url).pathname.split("/").filter(Boolean).at(-1);R.A.delete("/api/v1/chats/".concat(q,"/files/").concat(e)).catch(a=>{(0,o.S)(a,"Error while deleting file: ".concat(e)),k.notifications.show({color:"red",title:"Error",message:"An error occurred while attempting to delete the file."})})}ec(e=>e.filter((e,t)=>t!==a))},children:(0,i.jsx)(T.Qks,{className:"w-4 h-4"})})})]},a)}),[ed,q,eO]),e_=(0,B.useCallback)((e,a,t,i)=>{let l=new AbortController;eF({id:t,state:1,abort:l,percentage:0}),(0,I.Se)("orgs/".concat(e,"/chats/").concat(a,"/files/").concat(i.name),i,{access:"public",contentType:i.type,handleUploadUrl:"/api/v1/chats/".concat(a,"/files"),abortSignal:l.signal,onUploadProgress:e=>{eF({id:t,state:1,percentage:e.percentage,abort:l})}}).then(e=>{eF({id:t,percentage:100,state:2,url:e.url})}).catch(e=>{e instanceof P.iA||((0,o.S)(e),k.notifications.show({color:"red",title:"Upload error",message:"An error occurred while uploading the file: ".concat(i.name,", please try again.")}),eF({id:t,state:3}))})},[eF]),eV=(0,B.useCallback)(async e=>{let a=q;a||(a=(await $()).id);let t=e.filter(e=>!ed.find(a=>{let[t]=a;return!("path"in t)||t.path===e.path})).map(e=>[e,{id:(0,G.A)(),state:0}]);t.forEach(e=>{let[t,i]=e;return e_(Q,a,i.id,t)}),ec(e=>e.concat(t))},[e_,q,$,ed]),eJ=(0,B.useCallback)(e=>{var a;if((null==(a=e.clipboardData)?void 0:a.files)&&0!==e.clipboardData.files.length&&0!==eD.length)(async a=>{let t=q;t||(t=(await $()).id),a.forEach(e=>{let[a,i]=e;return e_(Q,t,i.id,a)}),a.length>0&&(ec(e=>e.concat(a)),e.preventDefault())})(Array.from(e.clipboardData.files).filter(e=>eD.includes(e.type)).filter(e=>e.size<=5242880).map(e=>[e,{id:(0,G.A)(),state:0}]))},[e_,q,$,eD,Q]);return(0,B.useEffect)(()=>{if(ey)return;let e=em.filter(e=>e.capabilities.image.output).filter(e=>!e.isDisabled),a=(null==er?void 0:er.modelSettings.defaultImageModel)||"minimax-image-01";return e.some(e=>e.id===a)?void eC(a):e.length>0?void eC(e.at(0).id):void eC(void 0)},[em,er,ey]),(0,B.useEffect)(()=>(document.addEventListener("paste",eJ),()=>document.removeEventListener("paste",eJ)),[eJ]),(0,B.useEffect)(()=>{!ea&&eu.current&&eu.current.focus()},[ea]),(0,B.useEffect)(()=>{ez&&(void 0===ez.capabilities.image.outputMaxSamples?eS(1):ej>ez.capabilities.image.outputMaxSamples&&eS(ez.capabilities.image.outputMaxSamples),(0,F.YW)(ez.capabilities.image.outputQuality).with(F.P.array(F.P.string),e=>{e.includes(ek)||eT(e[0])}).with(F.P.array(F.P.not(F.P.string)),e=>{e.some(e=>e.value===ek)||eT(e[0].value)}).otherwise(()=>{eT(void 0)}),(0,F.YW)(ez.capabilities.image.outputSizes).with(F.P.array(F.P.string),e=>{e.includes(eA)||eE(e[0])}).with(F.P.array(F.P.not(F.P.string)),e=>{e.some(e=>e.value===eA)||eE(e[0].value)}).otherwise(()=>{eE(void 0)}),(0,F.YW)(ez.capabilities.image.outputAspectRatios).with(F.P.array(F.P.string),e=>{e.includes(eN)||eM(e[0])}).with(F.P.array(F.P.not(F.P.string)),e=>{e.some(e=>e.value===eN)||eM(e[0].value)}).otherwise(()=>{eM(void 0)}),(0,F.YW)(ez.capabilities.image.outputStyles).with(F.P.array(F.P.string),e=>{e.includes(eP)||eI(e[0])}).with(F.P.array(F.P.not(F.P.string)),e=>{e.some(e=>e.value===eP)||eI(e[0].value)}).otherwise(()=>{eI(void 0)}))},[ez,ek,eA,ej,eN,eP]),(0,i.jsx)("div",{className:(0,d.cn)("md:pt-4 pb-2 md:pb-8 flex items-center gap-x-2 px-4 sm:justify-center text-message-foreground bg-gradient-to-b from-transparent to-secondary z-10",X?"absolute bottom-0 left-0 right-0":"w-full"),children:(0,i.jsx)("div",{className:(0,d.cn)("flex flex-col w-full md:max-w-[740px] bg-inputBackground border-inputBorder border rounded-2xl drop-shadow-md",ea||ei?"bg-inputDisabled":""),children:(0,i.jsxs)(N.mR,{openRef:ex,disabled:0===eD.length,onDrop:eV,onReject:e=>{e.forEach(e=>{k.notifications.show({color:"red",title:"Upload Rejected",message:"Image upload for: ".concat(e.file.name," was rejected because: ").concat(e.errors.map(e=>e.message).join(", "),".")})})},maxSize:5242880,accept:eD,activateOnClick:!1,children:[(0,i.jsx)(N.mR.Accept,{children:(0,i.jsx)(u.Overlay,{radius:16,center:!0,blur:1,children:(0,i.jsxs)(x.Group,{children:[(0,i.jsx)(h.Text,{c:"light"===eh?"white":"dimmed",children:(0,i.jsx)(T.jsH,{})}),(0,i.jsx)(f.Title,{order:4,c:"light"===eh?"white":"dimmed",children:"Drop your files here..."})]})})}),ei&&(0,i.jsx)(u.Overlay,{radius:16,center:!0,blur:1,children:(0,i.jsx)(h.Text,{size:"sm",c:"light"===eh?"white":"dimmed",children:"This Agent uses a premium Model. Upgrade to a paid plan to use."})}),eG.length>0?(0,i.jsx)(b.Flex,{wrap:"wrap",gap:8,justify:"flex-start",m:"sm",mb:0,children:eG}):null,(0,i.jsx)(w.Textarea,{pt:6,autoFocus:!0,autosize:!0,minRows:1,maxRows:13,size:"md",radius:16,disabled:ea||ei,value:eL,onChange:e=>eg(e.target.value),onKeyDown:e=>{!ea&&"Enter"===e.key&&(e.getModifierState("Shift")||(e.preventDefault(),e.stopPropagation(),eU(eL)))},placeholder:"Ask Anything...","data-testid":"chat-input",ref:eu,styles:{input:{border:"none",backgroundColor:"transparent"}}}),(0,i.jsxs)(x.Group,{justify:"space-between",wrap:"nowrap",children:[(0,i.jsxs)(x.Group,{gap:4,pl:8,wrap:"nowrap",children:[(0,i.jsx)(V,{disabled:ea||ei,setInput:eg,onSubmit:eU,"data-testid":"chat-voice-mic"}),(0,i.jsx)(p.Tooltip,{transitionProps:{transition:"fade",duration:300},label:(0,i.jsx)(c.Box,{p:"xs",children:0===eD.length?Z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"File uploads are not supported by this agent."}),(0,i.jsxs)(h.Text,{size:"xs",mt:8,children:["To add data, please use the ",(0,i.jsx)("b",{children:"Knowledge"})," option, ",(0,i.jsx)("br",{})," accessible from the chat menu"," ",(0,i.jsx)("b",{children:"in the top right corner"}),"."]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"File uploads are not available with this model."}),(0,i.jsx)(h.Text,{size:"xs",mt:8,children:"To upload files, please select a different model."})]}):(0,i.jsxs)(c.Box,{maw:350,style:{wordBreak:"break-word",whiteSpace:"normal"},children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"Upload your files"}),(0,i.jsx)(h.Text,{size:"xs",c:"dimmed",mb:8,children:"You can upload images and documents."}),(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"Supported types and formats"}),(null==eO||null==(a=eO.capabilities.image.inputFormats)?void 0:a.length)?(0,i.jsxs)(h.Text,{size:"sm",children:[(0,i.jsxs)(h.Text,{fw:600,size:"sm",mb:4,span:!0,children:["- Images:"," "]}),null==eO||null==(t=eO.capabilities.image.inputFormats)?void 0:t.map(e=>O.extension(e)||e).join(", ")]}):null,(null==eO||null==(U=eO.capabilities.audio.supportsFormats)?void 0:U.length)?(0,i.jsxs)(h.Text,{size:"sm",children:[(0,i.jsxs)(h.Text,{fw:600,size:"sm",mb:4,span:!0,children:["- Audio:"," "]}),null==eO||null==(J=eO.capabilities.audio.supportsFormats)?void 0:J.map(e=>O.extension(e)||e).join(", ")]}):null,(null==eO||null==(H=eO.capabilities.video.supportsFormats)?void 0:H.length)?(0,i.jsxs)(h.Text,{size:"sm",children:[(0,i.jsxs)(h.Text,{fw:600,size:"sm",mb:4,span:!0,children:["- Videos:"," "]}),null==eO||null==(Y=eO.capabilities.video.supportsFormats)?void 0:Y.map(e=>O.extension(e)||e).join(", ")]}):null,(null==eO||null==(W=eO.capabilities.document.supportsFormats)?void 0:W.length)?(0,i.jsxs)(h.Text,{size:"sm",children:[(0,i.jsxs)(h.Text,{fw:600,size:"sm",mb:4,span:!0,children:["- Documents:"," "]}),null==eO||null==(K=eO.capabilities.document.supportsFormats)?void 0:K.map(e=>O.extension(e)||e).join(", ")]}):null,(0,i.jsxs)(h.Text,{size:"xs",mt:8,c:"dimmed",children:["Max file size: ",(0,z.O)(5242880)]})]})}),withArrow:!0,children:(0,i.jsx)(v.ActionIcon,{style:{flexShrink:0},radius:100,type:"button",variant:"subtle",size:"lg",onClick:()=>{var e;return null==(e=ex.current)?void 0:e.call(ex)},"data-testid":"chat-attachment",disabled:ea||ei||0===eD.length,color:"#A8A8A8",children:(0,i.jsx)(T.FQY,{className:"w-6 h-6"})})}),Z?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Tooltip,{label:(null==eO?void 0:eO.capabilities.webSearch)?ev?"Disable Web Search":"Enable Web Search":(0,i.jsxs)(c.Box,{p:"xs",children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"Web Search is not available with this model."}),(0,i.jsx)(h.Text,{size:"xs",mt:8,children:"To search the web, please select a different model."})]}),withArrow:!0,children:(0,i.jsx)(v.ActionIcon,{style:{flexShrink:0},radius:100,type:"button",variant:"subtle",size:"lg",disabled:ea||ei||!(null==eO?void 0:eO.capabilities.webSearch),color:ev?void 0:"#A8A8A8",onClick:()=>ef(e=>!e),children:(0,i.jsx)(T.bl6,{className:"w-6 h-6"})})}),(0,i.jsxs)(y.Popover,{width:280,position:"top",withArrow:!0,shadow:"lg",children:[(0,i.jsx)(y.Popover.Target,{children:(0,i.jsx)(p.Tooltip,{label:eR?(0,i.jsxs)(c.Box,{p:"xs",children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"Image Generation is not currently available."}),(0,i.jsx)(h.Text,{size:"xs",mt:8,children:"All models have been disabled by the organization administrator."})]}):(null==eO?void 0:eO.capabilities.toolCalling)?"Image Generation Options":(0,i.jsxs)(c.Box,{p:"xs",children:[(0,i.jsx)(h.Text,{fw:500,size:"sm",mb:4,children:"Image Generation is not available with this model."}),(0,i.jsx)(h.Text,{size:"xs",mt:8,children:"To generate images, please select a different model."})]}),withArrow:!0,children:(0,i.jsx)(v.ActionIcon,{style:{flexShrink:0},radius:100,type:"button",variant:"subtle",size:"lg",disabled:ea||ei||!(null==eO?void 0:eO.capabilities.toolCalling)||eR,color:eb?void 0:"#A8A8A8",children:(0,i.jsx)(T.rlP,{className:"w-6 h-6"})})})}),(0,i.jsx)(y.Popover.Dropdown,{children:(0,i.jsxs)(C.Stack,{children:[(0,i.jsx)(h.Text,{fw:500,children:"Image Generation Options"}),(0,i.jsx)(j.Switch,{checked:eb,onChange:()=>ew(e=>!e),label:"Enabled",labelPosition:"left",w:"100%",styles:{body:{width:"100%"},track:{marginLeft:"auto"}}}),(0,i.jsxs)(C.Stack,{gap:1,children:[(0,i.jsx)(S.InputLabel,{children:"Image Model"}),(0,i.jsx)(_.A,{miw:"auto",disabled:!eb,modelType:"image",value:ey,onChange:e=>eC(e)})]}),(null==ez?void 0:ez.capabilities.image.outputMaxSamples)&&(null==ez?void 0:ez.capabilities.image.outputMaxSamples)>1?(0,i.jsxs)(C.Stack,{gap:"sm",children:[(0,i.jsxs)(x.Group,{justify:"space-between",children:[(0,i.jsx)(S.InputLabel,{children:"Number of samples:"}),(0,i.jsx)(h.Text,{children:ej})]}),(0,i.jsx)(A.Slider,{disabled:!eb,min:1,max:null==ez?void 0:ez.capabilities.image.outputMaxSamples,step:1,value:ej,onChange:e=>eS(e)})]}):null,(null==ez?void 0:ez.capabilities.image.outputSizes)===void 0?null:(0,i.jsx)(C.Stack,{gap:"sm",children:(0,i.jsx)(E.Select,{allowDeselect:!1,comboboxProps:{withinPortal:!1},disabled:!eb,label:"Image Size",data:ez.capabilities.image.outputSizes,value:eA,onChange:e=>eE(e)})}),(null==ez?void 0:ez.capabilities.image.outputAspectRatios)===void 0?null:(0,i.jsx)(C.Stack,{gap:"sm",children:(0,i.jsx)(E.Select,{allowDeselect:!1,comboboxProps:{withinPortal:!1},disabled:!eb,label:"Image Aspect Ratio",data:ez.capabilities.image.outputAspectRatios,value:eN,onChange:e=>eM(e)})}),(null==ez?void 0:ez.capabilities.image.outputQuality)===void 0?null:(0,i.jsx)(C.Stack,{gap:"sm",children:(0,i.jsx)(E.Select,{allowDeselect:!1,comboboxProps:{withinPortal:!1},disabled:!eb,label:"Image Quality",data:ez.capabilities.image.outputQuality,value:ek,onChange:e=>eT(e)})}),(null==ez?void 0:ez.capabilities.image.outputStyles)===void 0?null:(0,i.jsx)(C.Stack,{gap:"sm",children:(0,i.jsx)(E.Select,{allowDeselect:!1,comboboxProps:{withinPortal:!1},disabled:!eb,label:"Image Style",data:ez.capabilities.image.outputStyles,value:eP,onChange:e=>eI(e)})})]})})]}),(0,i.jsx)(_.A,{onChange:e=>null==es?void 0:es(e),value:en,variant:"transparent",disabled:ea||ei})]})]}),(0,i.jsx)(c.Box,{pr:8,children:ea?(0,i.jsx)(p.Tooltip,{label:"Cancel response",children:(0,i.jsx)(v.ActionIcon,{radius:100,type:"button",variant:"subtle",size:"xl","data-testid":"chat-cancel-btn",onClick:()=>null==el?void 0:el(),disabled:ei,children:(0,i.jsx)(T.HR9,{className:"w-10 h-10 animate-pulse"})})}):(0,i.jsx)(v.ActionIcon,{radius:100,type:"button",variant:"subtle",size:"xl","data-testid":"chat-submit-btn",disabled:!eL||ei||!eB,onClick:()=>eU(eL),children:(0,i.jsx)(T.b5B,{className:"w-10 h-10"})})})]})]})})})});var Y=t(47346),W=t(44775),K=t(73070),Q=t(32980),q=t(8842),X=t(78857),Z=t(3942),$=t(29891),ee=t(64986),ea=t(50491),et=t(38430),ei=t(35695),el=t(37989),en=t(26903);let es=[{id:"gpt-4o-azure",name:"GPT-4o"},{id:"gpt-4.1",name:"GPT-4.1"},{id:"anthropic-claude-3-5-sonnet",name:"Claude 3.5"},{id:"gemini-2.5-preview",name:"Gemini 2.5"},{id:"grok-3-beta",name:"Grok 3"},{id:"perplexity-sonar",name:"Perplexity Sonar"}],er=[{id:"gpt-4.1-mini",name:"GPT-4.1 Mini"},{id:"gpt-4o-mini-azure",name:"GPT-4o Mini"},{id:"gemini-2.0-flash",name:"Gemini 2.0"},{id:"grok-3-mini-beta",name:"Grok 3 Mini Beta"},{id:"perplexity-sonar",name:"Perplexity Sonar"}],eo=e=>{let{modelId:a,setModelId:t,allowPremiumModels:l}=e;return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-4 px-4 text-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center text-3xl my-4 font-bold",children:"Where should we begin?"}),(0,i.jsx)("div",{className:"flex gap-4 w-full flex-wrap justify-center",children:(l?es:er).map(e=>(0,i.jsx)(en.Button,{variant:"outline-secondary",onClick:()=>t(e.id),leftSection:a===e.id&&(0,i.jsx)(T.hm8,{size:14,className:"text-green"}),styles:{root:{backgroundColor:a===e.id?"hsl(var(--highlight))":"transparent"}},children:e.name},e.id))})]})},ed=(0,ee.h)(et.A),ec=(e,a)=>{var t,i,l,n,s,r,o,d,c,u,m,p,h;switch(a.type){case"message.created":{let{messageId:t}=a.payload;return{...e,stream:{id:t,createdAt:new Date,updatedAt:new Date,role:$.Role.system,content:""}}}case"message.delta":{let t=a.payload.content.text,i=e.stream.content+t,l=!!e.loading&&0===i.trim().length;return{...e,loading:l,searching:!1,streaming:!0,stream:{...e.stream,updatedAt:new Date,content:i}}}case"tool.call":{let o=a.payload,d=o.calls.some(e=>e.type===Z.t6);return{...e,loading:!1,streaming:!0,searching:d,stream:{...e.stream,metadata:{...null!=(n=e.stream.metadata)?n:{},tools:{...null!=(s=null==(t=e.stream.metadata)?void 0:t.tools)?s:{},calls:[...null!=(r=null==(l=e.stream.metadata)||null==(i=l.tools)?void 0:i.calls)?r:[],...o.calls]}}}}}case"message.complete":{let{estimatedInputTokens:t,inputTokens:i,estimatedOutputTokens:l,outputTokens:n}=a.payload;return{...e,loading:!1,messages:[...e.messages,{...e.stream,tokenCount:(i||t)+(n||l),metadata:{...null!=(o=e.stream.metadata)?o:{},estimatedInputTokens:t,inputTokens:i,estimatedOutputTokens:l,outputTokens:n}}],content:e.stream.content,stream:null}}case"message.error":{let t,{messageId:i,error:l}=a.payload;return t=(null==(d=e.stream)?void 0:d.id)===i?[...e.messages,{...e.stream,metadata:{...null!=(u=e.stream.metadata)?u:{},error:l}}]:[...e.messages,{id:i,createdAt:new Date,updatedAt:new Date,role:$.Role.system,content:"",metadata:{error:l}}],{...e,messages:t,loading:!1,searching:!1,content:null==(c=e.stream)?void 0:c.content,stream:null}}case"message.canceled":return{...e,loading:!1,streaming:!1,searching:!1,content:null==(m=e.stream)?void 0:m.content,stream:null};case"tool.message":{let t=a.payload;return{...e,loading:!1,searching:!1,messages:[...e.messages,{id:t.messageId,createdAt:new Date,updatedAt:new Date,role:$.Role.tool,content:t.output,tokenCount:t.tokenCount,metadata:{...null!=(p=t.metadata)?p:{},toolCallId:t.toolCallId,status:t.status}}]}}case"closed":return{...e,loading:!1,streaming:!1,searching:!1,summarize:!0};case"submit.prompt":{let{input:t,date:i}=a.payload;return{...e,loading:!0,chatStarted:!0,searching:!1,summarize:!1,messages:[...e.messages,{createdAt:i,updatedAt:i,role:$.Role.user,content:t}]}}case"submit.tools":return{...e,loading:!0,searching:!1,summarize:!1};case"submit.replay_tool_call":{let{toolMessageId:t}=a.payload,i=[];for(let a=0;a<e.messages.length;a+=1){let l=e.messages[a];if(l.id===t){for(let t=a+1;t<e.messages.length;t++){let a=e.messages[t];if("tool"===a.role)i.push(a);else break}break}i.push(l)}return{...e,streaming:!0,summarize:!1,messages:i}}case"chat.reset":return{...e,messages:[],loading:!1,streaming:!1,chatStarted:!1,summarize:!1,content:"",stream:null};case"error":{let a=e.messages.slice(0,e.messages.length-1);return{...e,loading:!1,streaming:!1,messages:a,content:null==(h=e.stream)?void 0:h.content,stream:null}}default:throw Error("Unknown Action: ".concat(JSON.stringify(a)))}},eu="gpt-4o-azure",em="gpt-4.1-mini",ep=e=>{var a;let{orgId:t,ai:l,chat:s,canEditAi:r,aiUserInputs:u,featureFlags:m,embedConfig:h,setMessagesCallback:L,onMessageCompleteCallback:g,onFlowTraceEvent:x,onSubmitUserMessage:f,onSubmitToolOutput:b,onRequestComplete:w,header:y,flowOptions:C,orgSubscription:j,orgSettings:S,ephemeral:A,setEphemeral:E}=e,[N,M]=(0,B.useReducer)(ec,{loading:!1,streaming:!1,chatStarted:!1,messages:s?s.messages:[],stream:null,content:"",summarize:!1}),[P,I]=(0,B.useState)(null),[z,O]=(0,B.useState)(null),[D,U]=(0,B.useState)(!0),[F,G]=(0,B.useState)(s),{modelId:_,setModelId:V}=(0,W.j)(),J=(0,q.C)(),Z=(0,Q.v)(),$=(0,ei.usePathname)(),ee=(0,ei.useRouter)(),{addChat:et,reloadChats:en}=(0,K.R)(),{models:es,fetchModels:er}=(0,n.G)(),ep=(0,ei.useSearchParams)().get("new"),eh=!!j&&j.pricingPlan!==X.YC.FREE,eL=void 0===S||S.memory,eg=(0,B.useMemo)(()=>es.find(e=>e.id===(l?l.modelId:_)),[es,l,_]);(0,B.useEffect)(()=>{F||es.length>0||er()},[er,es,F]),(0,B.useEffect)(()=>{ep&&s&&et(s)},[ep,et,s]),(0,B.useEffect)(()=>{if("/chat"===$||"/chat/"===$)G(null);else if($.startsWith("/chat")){let e=$.split("/").pop();(null==F?void 0:F.id)!==e&&ee.push("/chat/".concat(e))}},[$]),(0,B.useEffect)(()=>{_||((null==S?void 0:S.modelSettings.defaultModel)?V(S.modelSettings.defaultModel):V(eh?eu:em))},[]),(0,B.useEffect)(()=>{if(l)V("");else if(s){var e,a;V((null==s||null==(a=s.messages[(null==s?void 0:s.messages.length)-1])||null==(e=a.metadata)?void 0:e.aiModelId)||(eh?eu:em))}},[l,s,V,eh]),(0,B.useEffect)(()=>{(async()=>{l&&l.isPremiumModel&&U(eh)})()},[l,eh]),(0,B.useEffect)(()=>{L&&L(N.messages)},[L,N.messages]);let ex=async e=>{let a=window.innerWidth/2-300,t=window.innerHeight/2-300,i=window.open(e,"llmAuthPopup","width=".concat(600,",height=").concat(600,",top=").concat(t,",left=").concat(a));i&&I(i)};(0,B.useEffect)(()=>{let e=e=>{let a=e.detail;a.includes("/chat-auth?href=")&&ex(a)};return document.addEventListener("llm-link",e),()=>{document.removeEventListener("llm-link",e)}}),(0,B.useEffect)(()=>{if(!F)return;let e=async()=>{await R.A.put("/api/v1/chats/".concat(F.id,"/touch"))};"TEST"!==F.source&&e()},[F]),(0,B.useEffect)(()=>{J.isOpen&&J.onSpeak(N.content),Z.isActive&&Z.onSpeak(N.content)},[N.content]),(0,B.useEffect)(()=>{if(!F)return;let e=async()=>{await R.A.put("/api/v1/chats/".concat(F.id,"/summarize")),en()};N.summarize&&"TEST"!==F.source&&(!F.summary||N.messages.length<10||N.messages.length%10==0)&&e()},[F,N.messages,N.summarize,en]);let ev=(0,B.useCallback)(e=>{e.addEventListener("message.created",e=>{M({type:"message.created",payload:JSON.parse(e.data)})}),e.addEventListener("message.delta",e=>{M({type:"message.delta",payload:JSON.parse(e.data)})}),e.addEventListener("tool.call",e=>{M({type:"tool.call",payload:JSON.parse(e.data)})}),e.addEventListener("message.complete",e=>{M({type:"message.complete",payload:JSON.parse(e.data)}),g&&g()}),e.addEventListener("message.error",e=>{M({type:"message.error",payload:JSON.parse(e.data)})}),e.addEventListener("tool.message",e=>{M({type:"tool.message",payload:JSON.parse(e.data)})}),e.addEventListener("flow.trace.event",e=>{let a=JSON.parse(e.data);x&&x(a.event)}),e.onerror=e=>{var a;let t=JSON.parse(e.data);M({type:"error",payload:{error:t.error}}),(0,o.S)(e,"Error while reading SSE stream"),k.notifications.show({color:"red",title:"Error",message:"".concat(null!=(a=t.error)?a:"Error while reading SSE stream")})},e.onabort=e=>{var a,t;if(null==(a=e.source)?void 0:a.userCancelRequested)return void M({type:"message.canceled"});(0,o.S)(e),k.notifications.show({color:"red",title:"Error",message:"".concat(null!=(t=e.data)?t:"Request aborted",". Please refresh the page.")})},e.onreadystatechange=e=>{2===e.readyState&&(M({type:"closed"}),w&&w())},O(e)},[]),ef=(0,B.useCallback)((e,a,t)=>{if(!e||!a||"string"==typeof a&&0===a.trim().length||Array.isArray(a)&&0===a.length)return;f&&f(a);let i=new Date;M({type:"submit.prompt",payload:{date:i,input:a}});let l=new el.y("/api/v1/chats/".concat(e.id),{start:!1,method:"POST",withCredentials:!0,payload:JSON.stringify({prompt:a,date:(0,d.A)(i),...C?{options:{flow:C}}:{},..._?{modelId:_}:{},tools:t&&0===t.length?void 0:t}),headers:{"Content-Type":"application/json; charset=utf-8"}});ev(l),l.stream()},[C,_,ev,f]);(0,B.useEffect)(()=>{let e=setInterval(()=>{(null==P?void 0:P.closed)&&(clearInterval(e),ef(F,"Authentication done"),I(null))},1e3);return()=>{clearInterval(e)}},[P,F,ef]);let eb=(0,B.useCallback)(async()=>{let e=await R.A.post("/api/v1/chats",{modelId:_,...eL?{ephemeral:A}:{}}).then(e=>e.data);return G(e),M({type:"chat.reset"}),et(e),window&&window.history.pushState(null,"","/chat/".concat(e.id)),e},[_,et,A,eL]),ew=(0,B.useCallback)(async(e,a)=>{ef(F||await eb(),e,a)},[ef,F,eb]),ey=(0,B.useCallback)(()=>{z&&(z.userCancelRequested=!0,z.close())},[z]),eC=(0,B.useCallback)((e,a)=>{if(!F)return;b&&b(a),M({type:"submit.tools"});let t=new el.y("/api/v1/chats/".concat(F.id,"/tool-output"),{start:!1,method:"POST",withCredentials:!0,payload:JSON.stringify({systemMessageId:e,outputs:a,...C?{options:{flow:C}}:{}}),headers:{"Content-Type":"application/json; charset=utf-8"}});ev(t),t.stream()},[F,ev,C,b]),ej=(0,B.useCallback)((e,a)=>{if(!F)return;M({type:"submit.replay_tool_call",payload:{toolMessageId:e}});let t=new el.y("/api/v1/chats/".concat(F.id,"/replay-tool"),{start:!1,method:"POST",withCredentials:!0,payload:JSON.stringify({toolMessageId:e,excludeKnowledgeIds:a,...C?{options:{flow:C}}:{}}),headers:{"Content-Type":"application/json; charset=utf-8"}});ev(t),t.stream()},[F,ev,C]),eS={};h&&h.backgroundColor&&(eS.background=h.backgroundColor);let eA=!!(l||F&&N.messages.length>0);return(0,i.jsx)(ea.M4,{adapter:ed,children:(0,i.jsxs)("div",{className:(0,d.cn)("flex h-full w-full flex-col space-y-2 min-w-0 relative",eA?"shrink":"justify-center !space-y-4"),style:eS,children:[eA?(0,i.jsxs)(i.Fragment,{children:[y,(0,i.jsx)(Y.ChatMessages,{chat:F,ai:l,aiUserInputs:u,loading:N.loading||!!P,searching:N.searching,streaming:N.streaming,chatStarted:N.chatStarted,messages:N.messages,stream:N.stream,canEditAi:r,removeKnowledge:ej,submitToolOutput:eC,embedConfig:h})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute top-5 left-5 hidden [.sidebar-collapsed_&]:md:block",children:(0,i.jsx)(v.ActionIcon,{variant:"light",onClick:()=>document.body.classList.toggle("sidebar-collapsed"),size:"lg",children:(0,i.jsx)(T.k43,{className:"w-5 h-5"})})}),eL&&!F?(0,i.jsx)(c.Box,{pos:"absolute",right:20,top:4,children:(0,i.jsx)(p.Tooltip,{label:(null==eg?void 0:eg.capabilities.toolCalling)?A?"Disable ephemeral chat mode, where memory retrieval and formation are allowed.":"Enable ephemeral chat mode, where memory retrieval and formation are temporarily disabled.":"Ephemeral chat mode is not available with this model.",multiline:!0,position:"left",withArrow:!0,w:350,children:(0,i.jsx)(v.ActionIcon,{variant:"subtle",size:"lg",onClick:()=>null==E?void 0:E(!A),disabled:!(null==eg?void 0:eg.capabilities.toolCalling),children:A?(0,i.jsx)(T.sRK,{className:"w-5 h-5"}):(0,i.jsx)(T.tLq,{className:"w-5 h-5"})})})}):null,(0,i.jsx)(eo,{modelId:_,setModelId:V,allowPremiumModels:eh})]}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(H,{orgId:t,chatId:null!=(a=null==F?void 0:F.id)?a:null,alignBottom:eA,ai:l,isLoading:N.loading||N.streaming||!!P,createChat:eb,onSubmit:ew,featureFlags:m,cancelResponse:ey,disabled:!D,modelId:_,setModelId:V,orgSettings:S,memory:eL&&!A})})]})})}},32980:(e,a,t)=>{t.d(a,{v:()=>n});var i=t(72571),l=t(87700);let n=(0,t(65453).v)((e,a)=>({isActive:!1,onSpeak:async t=>{var n,s;let r;if(!t)return;let{ai:o}=a(),d=(null==o||null==(n=o.profile)?void 0:n.voiceEngine)||"microsoft",c=(null==o||null==(s=o.profile)?void 0:s.voice)||"en-US-JennyNeural";"elevenlabs"===d&&(r=await (0,i.CP)(t,c)),"microsoft"===d&&(r=await (0,l.rC)(t,c)),r&&r.play(),e({audio:r})},onActiveToggle:t=>{let{isActive:i,audio:l}=a();l&&i&&(l.pause(),e({audio:void 0})),e({isActive:!i,ai:t})}}))},43215:(e,a,t)=>{t.d(a,{Ip:()=>l,lC:()=>i});var i=function(e){return e.ANTHROPIC="anthropic",e.COHERE="cohere",e.OPENAI="openai",e.GOOGLE="google",e.XAI="xai",e.DEEPSEEK="deepseek",e.META="meta",e.PERPLEXITY="perplexity",e.BLACK_FOREST_LABS="black-forest-labs",e.STABILITY_AI="stability-ai",e.IDEOGRAM_AI="ideogram-ai",e.MINIMAX_AI="minimax-ai",e.RECRAFT="recraft",e}({}),l=function(e){return e.STANDARD="standard",e.PREMIUM="premium",e}({})},44775:(e,a,t)=>{t.d(a,{j:()=>i});let i=(0,t(65453).v)(e=>({modelId:"",setModelId:a=>e({modelId:a})}))},52658:(e,a,t)=>{t.d(a,{A:()=>y});var i=t(95155),l=t(43215),n=t(26029),s=t(27361),r=t(87160),o=t(14449),d=t(24225),c=t(70112),u=t(83347),m=t(54853),p=t(74271),h=t(25427),L=t(90232),g=t(12115),x=t(77487),v=t(61555);let f=e=>{if(e<1e3)return e.toString();if(e>=1e6){let a=Math.floor(e/1e6);return"".concat(a,"M")}let a=Math.floor(e/1e3);return"".concat(a,"K")},b=(0,g.memo)(function(e){let{label:a,tooltip:t,color:l,disabled:r}=e,o=(0,i.jsx)(n.Badge,{size:"xs",color:l,style:{cursor:r?"not-allowed":"pointer"},children:a});return t?(0,i.jsx)(s.Tooltip,{label:t,position:"bottom",inline:!0,withArrow:!0,offset:12,children:o}):o}),w=(0,g.memo)(function(e){let{model:a,disabled:t,isDefault:n}=e;return(0,i.jsxs)(i.Fragment,{children:[a.name,n?(0,i.jsx)(b,{label:"Default",color:"violet",disabled:t}):null,a.contextSize>0?(0,i.jsx)(b,{tooltip:"Context Size",label:"".concat(f(a.contextSize)),color:"gray",disabled:t}):null,a.capabilities.reasoning?(0,i.jsx)(b,{label:"Reasoning",color:"teal",disabled:t}):null,a.isVisible?null:(0,i.jsx)(b,{label:"Superuser",color:"yellow",disabled:t}),a.usageTier===l.Ip.PREMIUM?(0,i.jsx)(b,{label:"Premium",tooltip:t?"Upgrade to a paid plan to use premium models":"Limited usage, based on pricing plan",color:"blue",disabled:t}):null,a.isPrivate?(0,i.jsx)(s.Tooltip,{position:"bottom",label:"Hosted on a private instance",inline:!0,withArrow:!0,offset:12,children:(0,i.jsx)(L.A,{className:"w-4 h-4 text-green"})}):null]})}),y=(0,g.memo)(function(e){let{data:a,value:t,disabled:l,onChange:n,defaultModelId:s,variant:y="default",modelType:C="text",miw:j=340}=e,{models:S,fetchModels:A,setModels:E}=(0,x.G)();(0,g.useEffect)(()=>{S.length>0||(a?E(a):A())},[a,A,S,E]);let N=(0,r.useCombobox)({onDropdownClose:()=>N.resetSelectedOption()}),M=(0,g.useMemo)(()=>S.filter(e=>"text"===C?e.capabilities.text.output:e.capabilities.image.output),[S,C]),k=(0,g.useMemo)(()=>M.find(e=>e.id===s),[M,s]),T=(0,g.useMemo)(()=>M.find(e=>"default"===t?e.id===s:e.id===t),[M,t,s]),[P,I]=(0,g.useState)(250),R=(0,g.useRef)(null),z=(0,g.useCallback)(()=>{if(R.current){let e,a=R.current.getBoundingClientRect(),t=window.innerHeight-a.bottom;I(Math.max(100,(t>100?t:a.top)-40))}},[]);(0,g.useLayoutEffect)(()=>(window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)),[z]);let O=(0,g.useMemo)(()=>M.reduce((e,a)=>{let{creator:t}=a;return e[t]||(e[t]=[]),e[t].push(a),e},{}),[M]);return(0,i.jsxs)(o.Combobox,{withinPortal:!1,store:N,onOptionSubmit:e=>{let a=M.find(a=>"default"===e?a.id===s:a.id===e);a&&!a.isDisabled&&(n(e),N.closeDropdown())},children:[(0,i.jsx)(o.Combobox.Target,{children:(0,i.jsx)(d.InputBase,{ref:R,disabled:l||0===S.length,component:"button",type:"button",pointer:!0,rightSection:(0,i.jsx)(o.Combobox.Chevron,{}),rightSectionPointerEvents:"none",onClick:()=>{z(),N.toggleDropdown()},styles:{input:{border:"transparent"===y?"none":void 0,textDecoration:"transparent"===y?"underline":void 0}},children:0===S.length?(0,i.jsxs)(c.Group,{children:["Loading... ",(0,i.jsx)(u.Loader,{size:"xs"})]}):T?(0,i.jsxs)(c.Group,{h:"100%",gap:4,style:{flexWrap:"wrap",overflow:"hidden"},children:[(0,i.jsxs)(c.Group,{h:"100%",gap:4,style:{display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"},children:[(0,i.jsx)("span",{className:"shrink-0",children:v.QY[T.creator].icon}),"transparent"===y?null:(0,i.jsx)("span",{style:{minWidth:0,flexShrink:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:v.QY[T.creator].label}),(0,i.jsx)("span",{className:"shrink-0",children:T.name})]}),"default"===t?(0,i.jsx)(b,{label:"Default",color:"violet",disabled:!!l}):null,"transparent"!==y&&T.contextSize>0?(0,i.jsx)(b,{label:"".concat(f(T.contextSize)),color:"gray",disabled:!!l}):null,T.capabilities.reasoning&&"transparent"!==y?(0,i.jsx)(b,{label:"Reasoning",color:"teal",disabled:!!l}):null,T.isPrivate?(0,i.jsx)(L.A,{className:"w-4 h-4 text-green"}):null]}):(0,i.jsx)(m.Input.Placeholder,{children:"Select a model"})})}),(0,i.jsx)(o.Combobox.Dropdown,{miw:j,children:(0,i.jsx)(p.ScrollArea.Autosize,{mah:P,type:"scroll",children:(0,i.jsxs)(o.Combobox.Options,{children:[k?(0,i.jsx)(o.Combobox.Group,{label:(0,i.jsx)("span",{style:{cursor:"default"},children:(0,i.jsxs)(c.Group,{gap:4,children:[(0,i.jsx)(h.rK8,{className:"w-4 h-4"}),"Default"]})}),children:(0,i.jsx)(o.Combobox.Option,{value:"default",active:"default"===t,selected:"default"===t,disabled:k.isDisabled,children:(0,i.jsxs)(c.Group,{gap:4,children:["default"===t?(0,i.jsx)(h.s0,{className:"w-4 h-4"}):(0,i.jsx)("div",{className:"w-4 h-4"}),(0,i.jsxs)(c.Group,{gap:4,children:[v.QY[k.creator].icon||null,v.QY[k.creator].label||null]}),(0,i.jsx)(w,{model:k,disabled:k.isDisabled,isDefault:!0})]})})}):null,Object.keys(O).map(e=>(0,i.jsx)(o.Combobox.Group,{label:(0,i.jsx)("span",{style:{cursor:"default"},children:(0,i.jsxs)(c.Group,{gap:4,children:[v.QY[e].icon||null,v.QY[e].label||null]})}),children:O[e].map(e=>(0,i.jsx)(o.Combobox.Option,{value:e.id,active:e.id===t,selected:e.id===t,disabled:e.isDisabled,children:(0,i.jsxs)(c.Group,{gap:4,children:[e.id===t?(0,i.jsx)(h.s0,{className:"w-4 h-4"}):(0,i.jsx)("div",{className:"w-4 h-4"}),(0,i.jsx)(c.Group,{gap:4,className:"flex-1",children:(0,i.jsx)(w,{model:e,disabled:e.isDisabled})})]})},e.id))},e))]})})})]})})},61555:(e,a,t)=>{t.d(a,{QY:()=>d,mp:()=>r,MM:()=>o,kp:()=>s});var i=t(95155);t(12115);var l=t(25427),n=t(51362);let s=[{id:"kandinsky-21",name:"Kandinsky 2.1"},{id:"dalle-2",name:"DALLE 2"},{id:"dalle-3",name:"DALLE 3"},{id:"stable-diffusion-xl",name:"Stable Diffusion XL"},{id:"latent-consistency",name:"Latent Consistency"},{id:"playground-2",name:"Playground v2"},{id:"proteus",name:"Proteus v0.2"},{id:"realvisxl",name:"Realvisxl v3 turbo"},{id:"flux-1.1-pro",name:"FLUX 1.1 Pro"}],r=[{name:"Andrew Multilingual",id:"en-US-AndrewMultilingualNeural",gender:"Male"},{name:"Emma Multilingual",id:"en-US-EmmaMultilingualNeural",gender:"Female"},{name:"Brian Multilingual",id:"en-US-BrianMultilingualNeural",gender:"Male"},{name:"Ava",id:"en-US-AvaNeural",gender:"Female"},{name:"Andrew",id:"en-US-AndrewNeural",gender:"Male"},{name:"Emma",id:"en-US-EmmaNeural",gender:"Female"},{name:"Brian",id:"en-US-BrianNeural",gender:"Male"},{name:"Jenny",id:"en-US-JennyNeural",gender:"Female"},{name:"Guy",id:"en-US-GuyNeural",gender:"Male"},{name:"Aria",id:"en-US-AriaNeural",gender:"Female"},{name:"Davis",id:"en-US-DavisNeural",gender:"Male"},{name:"Jane",id:"en-US-JaneNeural",gender:"Female"},{name:"Jason",id:"en-US-JasonNeural",gender:"Male"},{name:"Sara",id:"en-US-SaraNeural",gender:"Female"},{name:"Tony",id:"en-US-TonyNeural",gender:"Male"},{name:"Nancy",id:"en-US-NancyNeural",gender:"Female"},{name:"Amber",id:"en-US-AmberNeural",gender:"Female"},{name:"Ana",id:"en-US-AnaNeural",gender:"Female"},{name:"Ashley",id:"en-US-AshleyNeural",gender:"Female"},{name:"Brandon",id:"en-US-BrandonNeural",gender:"Male"},{name:"Christopher",id:"en-US-ChristopherNeural",gender:"Male"},{name:"Cora",id:"en-US-CoraNeural",gender:"Female"},{name:"Elizabeth",id:"en-US-ElizabethNeural",gender:"Female"},{name:"Eric",id:"en-US-EricNeural",gender:"Male"},{name:"Jacob",id:"en-US-JacobNeural",gender:"Male"},{name:"Jenny Multilingual",id:"en-US-JennyMultilingualNeural",gender:"Female"},{name:"Michelle",id:"en-US-MichelleNeural",gender:"Female"},{name:"Monica",id:"en-US-MonicaNeural",gender:"Female"},{name:"Roger",id:"en-US-RogerNeural",gender:"Male"},{name:"Ryan Multilingual",id:"en-US-RyanMultilingualNeural",gender:"Male"},{name:"Steffan",id:"en-US-SteffanNeural",gender:"Male"}],o=[{name:"D-ID",id:"did",description:"Best quality, fast generation, ultra-realistic avatar. Most expensive.",experimental:!1},{name:"Wav2Lip",id:"wav2lip",description:"Fast generation, good quality, lip-only animated avatar. Open-source and cheap.",experimental:!1},{name:"DreamTalk",id:"dreamtalk",description:"Moderate generation speed, good quality, full-head animated avatar. Open-source and cheap to run.",experimental:!1},{name:"SadTalker",id:"sadtalker",experimental:!0},{name:"SadTalkerVideo",id:"sadtalkervideo",experimental:!0},{name:"VideoRetalking",id:"videoretalking",experimental:!0},{name:"AniPortrait",id:"aniportrait",experimental:!0},{name:"LiveSpeechPortraits",id:"livespeechportraits",experimental:!0}],d={openai:{icon:(0,i.jsx)(l.sT2,{className:"w-4 h-4"}),label:"OpenAI"},anthropic:{icon:(0,i.jsx)(l.QsN,{className:"w-[1.1rem] h-[1.1rem]"}),label:"Anthropic"},meta:{icon:(0,i.jsx)(l.noY,{className:"w-4 h-4"}),label:"Meta"},google:{icon:(0,i.jsx)(l.Dvi,{className:"w-4 h-4"}),label:"Google"},cohere:{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{fill:a||"currentColor",fillRule:"evenodd",height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,i.jsx)("title",{children:"Cohere"}),(0,i.jsx)("path",{clipRule:"evenodd",d:"M8.128 14.099c.592 0 1.77-.033 3.398-.703 1.897-.781 5.672-2.2 8.395-3.656 1.905-1.018 2.74-2.366 2.74-4.18A4.56 4.56 0 0018.1 1H7.549A6.55 6.55 0 001 7.55c0 3.617 2.745 6.549 7.128 6.549z"}),(0,i.jsx)("path",{clipRule:"evenodd",d:"M9.912 18.61a4.387 4.387 0 012.705-4.052l3.323-1.38c3.361-1.394 7.06 1.076 7.06 4.715a5.104 5.104 0 01-5.105 5.104l-3.597-.001a4.386 4.386 0 01-4.386-4.387z"}),(0,i.jsx)("path",{d:"M4.776 14.962A3.775 3.775 0 001 18.738v.489a3.776 3.776 0 007.551 0v-.49a3.775 3.775 0 00-3.775-3.775z"})]})},{className:"w-4 h-4"}),label:"Cohere"},deepseek:{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{fill:a||"currentColor",fillRule:"evenodd",height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,i.jsx)("title",{children:"DeepSeek"}),(0,i.jsx)("path",{d:"M23.748 4.482c-.254-.124-.364.113-.512.234-.051.039-.094.09-.137.136-.372.397-.806.657-1.373.626-.829-.046-1.537.214-2.163.848-.133-.782-.575-1.248-1.247-1.548-.352-.156-.708-.311-.955-.65-.172-.241-.219-.51-.305-.774-.055-.16-.11-.323-.293-.35-.2-.031-.278.136-.356.276-.313.572-.434 1.202-.422 1.84.027 1.436.633 2.58 1.838 3.393.137.093.172.187.129.323-.082.28-.18.552-.266.833-.055.179-.137.217-.329.14a5.526 5.526 0 01-1.736-1.18c-.857-.828-1.631-1.742-2.597-2.458a11.365 11.365 0 00-.689-.471c-.985-.957.13-1.743.388-1.836.27-.098.093-.432-.779-.428-.872.004-1.67.295-2.687.684a3.055 3.055 0 01-.465.137 9.597 9.597 0 00-2.883-.102c-1.885.21-3.39 1.102-4.497 2.623C.082 8.606-.231 10.684.152 12.85c.403 2.284 1.569 4.175 3.36 5.653 1.858 1.533 3.997 2.284 6.438 2.14 1.482-.085 3.133-.284 4.994-1.86.47.234.962.327 1.78.397.63.059 1.236-.03 1.705-.128.735-.156.684-.837.419-.961-2.155-1.004-1.682-.595-2.113-.926 1.096-1.296 2.746-2.642 3.392-7.003.05-.347.007-.565 0-.845-.004-.17.035-.237.23-.256a4.173 4.173 0 001.545-.475c1.396-.763 1.96-2.015 2.093-3.517.02-.23-.004-.467-.247-.588zM11.581 18c-2.089-1.642-3.102-2.183-3.52-2.16-.392.024-.321.471-.235.763.09.288.207.486.371.739.114.167.192.416-.113.603-.673.416-1.842-.14-1.897-.167-1.361-.802-2.5-1.86-3.301-3.307-.774-1.393-1.224-2.887-1.298-4.482-.02-.386.093-.522.477-.592a4.696 4.696 0 011.529-.039c2.132.312 3.946 1.265 5.468 2.774.868.86 1.525 1.887 2.202 2.891.72 1.066 1.494 2.082 2.48 2.914.348.292.625.514.891.677-.802.09-2.14.11-3.054-.614zm1-6.44a.306.306 0 01.415-.287.302.302 0 01.2.288.306.306 0 01-.31.307.303.303 0 01-.304-.308zm3.11 1.596c-.2.081-.399.151-.59.16a1.245 1.245 0 01-.798-.254c-.274-.23-.47-.358-.552-.758a1.73 1.73 0 01.016-.588c.07-.327-.008-.537-.239-.727-.187-.156-.426-.199-.688-.199a.559.559 0 01-.254-.078c-.11-.054-.2-.19-.114-.358.028-.054.16-.186.192-.21.356-.202.767-.136 1.146.016.352.144.618.408 1.001.782.391.451.462.576.685.914.176.265.336.537.445.848.067.195-.019.354-.25.452z"})]})},{className:"w-4 h-4"}),label:"DeepSeek"},xai:{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{fill:a||"currentColor",fillRule:"evenodd",height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,i.jsx)("title",{children:"Grok"}),(0,i.jsx)("path",{d:"M6.469 8.776L16.512 23h-4.464L2.005 8.776H6.47zm-.004 7.9l2.233 3.164L6.467 23H2l4.465-6.324zM22 2.582V23h-3.659V7.764L22 2.582zM22 1l-9.952 14.095-2.233-3.163L17.533 1H22z"})]})},{className:"w-[0.9rem] h-[0.9rem]"}),label:"xAI"},perplexity:{icon:(0,i.jsx)(l.bUP,{className:"w-[1.1rem] h-[1.1rem]"}),label:"Perplexity"},"black-forest-labs":{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{fill:a||"currentColor",fillRule:"evenodd",height:"1em",width:"1em",viewBox:"245 333 675 498",className:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("title",{children:"Black Forest Labs"}),(0,i.jsx)("path",{d:"M 570 333 L 568.554 334.671 L 567.449 336.16 C 566.583 337.419 565.774 338.716 564.949 340.002 L 562.997 343 L 559.691 348 L 556.495 353 L 554.505 356 L 551.306 361 L 549.279 364 L 545.72 369 L 541.576 375 L 539.424 378 L 536.67 382 L 532.667 388 L 528.692 394 L 524.308 401 L 520.333 407 L 513.003 418 L 510.424 422 L 507.921 426 C 506.58 428.041 505.118 429.998 503.72 432 C 502.109 434.307 500.56 436.658 499 439 L 495.695 444 L 494.45 446 C 493.078 448.341 491.771 450.718 490.302 453 C 488.989 455.039 487.565 457.002 486.191 459 C 484.819 460.997 483.501 463.029 482.091 465 L 478.427 470 C 476.321 472.949 474.355 475.995 472.33 479 L 470.283 482 L 467.515 486 L 464.953 490 L 462.424 494 L 459.319 499 L 455.495 505 L 453.505 508 L 451.59 511 L 449.127 515 L 447.29 518 C 446.396 519.369 445.421 520.676 444.464 522 L 442.347 525 L 440.333 528 L 437.691 532 L 434.495 537 L 432.494 540 L 429.809 544 C 428.435 545.999 427.019 547.967 425.695 550 L 421.947 556 L 418.053 562 L 414.308 568 L 410.334 574 L 408.37 577 L 407.144 579 C 405.987 581.009 404.867 583.038 403.63 585 L 401.666 588 L 397.692 594 L 394.576 599 L 391.424 604 L 388.308 609 L 385.667 613 L 380.344 621 L 378.424 624 L 375.308 629 L 370.695 636 L 369.45 638 L 366.55 643 C 365.946 644.017 365.299 645.008 364.655 646 C 362.04 650.026 359.292 653.964 356.692 658 L 352.947 664 L 348.425 671 L 344.811 676.911 L 342 681.285 L 339.775 684.925 L 336.269 690.17 L 334.47 693.015 L 332.504 696 L 329.309 701 L 326.692 705 L 324.203 709 L 321.772 713 L 317.217 720 L 313.424 726 L 311.576 729 L 307.783 735 C 306.062 737.691 304.273 740.338 302.507 743 L 300.529 746 L 297.471 751 L 295.493 754 L 293.507 757 L 291.529 760 L 288.471 765 L 286.493 768 L 284.507 771 L 282.53 774 L 281.308 776 L 279.54 779 L 278.252 781 L 275.424 785 L 273.344 788 L 269.975 793 L 266.505 798 L 264.496 800.985 L 263.13 802.911 C 262.273 804.078 261.393 805.228 260.576 806.424 L 256.95 812.004 C 256.248 813.022 255.513 814.014 254.768 815 L 252.488 818 L 251.09 820 C 250.229 821.318 249.404 822.657 248.58 823.998 C 247.799 825.269 246.999 826.531 246.281 827.839 L 245.812 828.841 L 245.552 829.329 L 245 831 L 680 831 L 679.346 829.64 L 679.005 829.246 L 678.39 828.421 C 676.971 826.896 675.475 825.45 673.995 823.985 C 672.026 822.035 670.079 820.062 668.039 818.184 L 663.576 814.255 L 660.911 811.816 L 656.999 808.086 C 656.016 807.178 655.014 806.297 654 805.424 L 651 802.83 C 648.95 800.976 647.027 798.988 645.015 797.093 L 642.171 794.514 L 639.615 792.269 C 638.228 791.01 636.908 789.686 635.561 788.385 C 633.768 786.653 631.953 784.942 630.086 783.29 C 629.219 782.523 628.36 781.721 627.424 781.036 C 626.621 780.449 625.797 779.928 624.83 779.654 L 622.961 779.43 L 621.985 779.482 L 620.996 779.595 L 619 779.831 L 617 779.961 L 614 779.999 L 610 780 L 599 780 L 538 780 L 338 780 L 338.888 778.329 L 339.201 777.841 L 339.802 776.839 L 341.671 773.995 L 345.025 769 C 346.391 767.007 347.81 765.053 349.086 763 L 352.064 758 L 355.308 753 L 357.189 750 C 359.029 747.003 360.788 743.958 362.692 741 L 365.333 737 L 368.025 733 L 371.484 728 C 373.437 725.055 375.147 721.959 377.078 719 L 379.809 715 L 381.833 712 L 384.495 708 L 388.344 702 L 396.309 690 L 399.505 685 L 401.495 682 L 405.319 676 L 409.692 669 L 414.947 661 L 417.424 657 L 419.953 653 L 421.861 650 L 423.884 647 L 425.972 644 L 427.949 641 L 430.515 637 L 434.645 631 C 435.955 629.031 437.176 627.008 438.424 625 L 440.344 622 L 446.308 613 L 450.078 607 L 453.459 602 C 454.509 600.366 455.461 598.671 456.449 597 L 457.695 595 L 460.333 591 L 464.333 585 C 466.331 582.004 468.352 579.023 470.309 576 L 473.505 571 L 476.139 567 C 478.037 564.028 479.771 560.955 481.695 558 C 482.576 556.647 483.49 555.316 484.424 554 C 485.602 552.34 486.798 550.696 487.924 549 L 490.504 545 L 492.471 542 L 495.529 537 L 497.496 534 L 501.316 528 L 502.551 526.004 C 503.494 524.422 504.411 522.825 505.424 521.286 L 507.811 517.83 L 510.344 513.996 L 513 510 C 514.994 507.008 517.02 504.036 518.947 501 L 521.424 497 L 523.95 493 L 526.424 489 L 528.95 485 L 532.053 480 L 536.656 473 L 540.555 467 L 543.319 463 L 545.934 459 L 547.978 456 C 549.102 454.343 550.223 452.683 551.308 451 L 555.053 445 L 558.308 440 L 561.435 435 C 562.736 432.964 564.134 430.996 565.495 429 L 567.49 426.005 L 569.364 423.16 L 569.931 422.159 L 570.242 421.671 L 571 420 L 573 420 L 573.729 421.671 L 574.531 423.16 C 575.475 424.804 576.468 426.42 577.516 428 L 581.645 434 C 582.955 435.969 584.173 437.993 585.424 440 L 587.319 443 L 589.218 446 L 591.194 449 L 593.922 453 L 597.053 458 C 598.122 459.683 599.229 461.34 600.333 463 L 602.344 466 L 604.424 469 C 605.843 470.993 607.288 472.964 608.645 475 C 610.395 477.625 611.973 480.357 613.695 483 C 614.577 484.353 615.492 485.682 616.424 487 L 619.255 491 L 622.505 496 L 624.506 499 L 626.505 502 L 630.656 508 L 636.025 516 L 639.485 521 L 643.344 527 L 647.947 534 L 651.695 540 C 653.019 542.033 654.435 544.001 655.809 546 L 659.163 551 L 661.092 554 L 663.54 558 C 664.639 559.698 665.832 561.333 666.975 563 L 671 569 L 685 590 L 687.656 593.996 L 690.189 597.83 L 693.203 602.17 L 696.344 607.001 L 701.67 615 L 703.717 618 L 706.485 622 L 709.691 627 L 714.333 634 L 717.025 638 L 720.495 643 L 722.494 646 L 725.142 650 L 728.355 655 L 732.485 661 L 736.355 667 L 738.424 670 L 741.255 674 C 742.361 675.636 743.38 677.325 744.424 679 L 746.344 682 L 751.656 690 L 755.505 696 L 757.506 699 L 759.505 702 L 762.975 707 C 765.017 709.977 766.998 712.996 769 716 C 770.775 718.663 772.57 721.314 774.309 724 L 777.505 729 L 779.495 732 L 782.691 737 L 785.305 741 L 787.142 744 C 787.934 745.339 788.694 746.696 789.544 748 C 790.664 749.719 791.902 751.356 793.127 753 C 794.858 755.324 796.614 757.628 798.279 760 C 799.666 761.976 800.994 763.992 802.333 766 L 806.309 772 L 809.505 777 L 811.506 780 L 813.505 783 C 814.636 784.669 815.824 786.301 816.911 788 C 817.956 789.632 818.884 791.33 819.864 793 C 820.462 794.02 821.091 795.017 821.748 796 C 822.657 797.358 823.631 798.67 824.579 800 L 828.884 806 C 830.589 808.317 832.339 810.596 833.921 813 L 836.424 817 C 837.698 819.021 838.987 821.036 840.348 823 C 841.05 824.013 841.763 825.007 842.518 825.981 L 843.326 826.941 L 845.093 828.682 L 847.015 829.972 L 848.004 830.397 L 849.001 830.682 L 851 830.941 C 852.333 831.002 853.665 830.997 855 831 L 862 831 L 904 831 L 903.387 829.64 L 903.094 829.246 L 902.563 828.421 L 900.607 825.906 C 899.353 824.287 898.103 822.664 896.909 821 C 895.26 818.702 893.731 816.321 892.116 814 L 888.579 809 C 887.162 807.016 885.724 805.05 884.38 803.015 L 881.434 798.424 L 879.63 795.83 L 877.666 792.985 L 873.667 787 L 867.667 778 L 865.05 774 L 862.485 770 L 859.024 765 L 856.976 762 L 853.505 757 L 851.506 754 L 849.505 751 L 842.495 740 L 840.494 737 L 834.507 728 L 833.181 726 L 831.297 723 L 829.471 720 L 827.504 717 L 826.217 715 L 822.413 709 L 820.485 706 C 818.916 703.647 817.239 701.37 815.695 699 L 812.576 694 L 810.656 691 C 809.332 688.976 807.972 686.975 806.576 685 L 804.424 682 C 803.491 680.683 802.577 679.353 801.695 678 L 797.947 672 L 794.064 666 C 792.832 664.018 791.721 661.963 790.459 660 L 787.078 655 L 783.922 650 L 779.861 644 L 777.309 640 L 774.053 635 L 770.947 630 L 767.691 625 L 764.495 620 L 762.494 617 L 759.833 613 L 756.495 608 L 753.717 604 L 751.67 601 L 743 588 L 739.656 583 L 735.515 577 L 732.309 572 L 727.691 565 L 724.485 560 L 721.717 556 L 719.67 553 L 715.667 547 L 707.667 535 L 704.33 530 L 702.283 527 L 699.515 523 C 697.972 520.685 696.54 518.299 694.971 516 L 690.029 509 C 689.132 507.685 688.266 506.35 687.424 505 C 686.38 503.325 685.364 501.633 684.254 500 C 682.863 497.953 681.355 495.99 679.884 494 C 678.91 492.682 677.957 491.349 677.026 490 C 675.888 488.351 674.785 486.678 673.691 485 L 671.142 481 L 668.505 477 L 665.306 472 C 664.421 470.649 663.51 469.317 662.576 468 C 661.398 466.341 660.196 464.701 659.079 463 L 656.576 459 C 655.516 457.318 654.436 455.651 653.329 454 L 649.191 448 L 646.495 444 L 643.025 439 L 636.974 430 L 632.745 424 L 629.485 419 L 626.717 415 C 625.575 413.345 624.446 411.682 623.344 410 L 621.414 407 L 619.481 404 C 618.791 402.982 618.076 401.982 617.336 401 C 616.077 399.333 614.775 397.699 613.559 396 L 611.498 393 L 608.025 388 L 603.974 382 L 600.424 377 C 598.57 374.378 596.774 371.712 595.053 369 L 591.305 363 C 589.761 360.63 588.084 358.353 586.515 356 L 583.95 352 L 581.329 348 L 576.505 341 L 573.818 337.059 L 572.475 335.321 L 571.711 334.517 L 571.343 334.086 L 570 333 M 863 493 L 862.327 494.671 L 861.586 496.16 L 860.533 498.025 L 858.086 502 L 854.714 508 L 852.85 511 C 852.024 512.323 851.211 513.653 850.425 515 L 848.15 519 L 845.85 523 L 844.139 526 C 842.756 528.358 841.233 530.629 839.872 533 L 837.694 537 L 836.573 539 L 833.6 544 L 830.575 549 C 829.741 550.35 828.87 551.676 827.997 553 L 822.692 561 L 819.576 566 L 817.05 570 L 815.203 573 L 812.154 577.995 L 810.4 580.84 L 809.892 581.841 L 809.609 582.329 L 809 584 L 920 584 L 919.571 582.329 L 918.999 580.84 L 918.083 578.975 L 916.931 576.998 C 915.65 574.979 914.326 572.99 913 571 L 907 562 C 905.454 559.68 903.899 557.367 902.425 555 C 901.398 553.35 900.401 551.68 899.424 550 C 898.262 547.999 897.156 545.967 895.936 544 L 891.425 537 C 889.16 533.363 887.047 529.632 884.772 526 L 880.911 520 L 878.576 516 L 877.397 514 L 871.4 504 L 869.012 500.002 L 867.319 497.045 L 866.84 496.16 L 866.269 495.159 L 866.014 494.671 L 865 493 L 863 493 M 582 589 L 582.301 590.671 L 582.859 592.16 L 583.879 594.025 L 585.254 596.002 L 588.346 600 L 590.575 603 L 593.421 606.961 L 594.859 608.83 L 596.975 611.424 L 598.341 613.17 L 601.895 618.001 C 603.661 620.349 605.531 622.619 607.255 625 L 610.025 629 C 610.958 630.348 611.914 631.679 612.884 633 L 616.576 638 L 619.421 641.961 L 622.201 645.576 L 622.829 646.424 L 623.986 648.17 L 625.094 650.039 L 626.872 653.001 L 629.495 657 L 630.783 659 L 635.858 667 L 639.142 672 L 642.344 677 L 646.333 683 L 653.667 694 C 655.219 696.329 656.793 698.646 658.308 701 C 660.851 704.95 663.149 709.05 665.692 713 C 668.506 717.371 671.493 721.63 674.308 726 L 677.424 731 L 680.003 735 L 687.333 746 L 691.308 752 L 695.053 758 L 698.947 764 L 702.692 770 C 705.507 774.37 708.493 778.63 711.308 783 L 715.692 790 L 720.947 798 L 723.424 802 L 726.003 806 L 728.656 809.996 L 731.189 813.83 L 734.149 818.13 L 735.27 819.87 L 737.463 823.286 L 739.7 826.97 L 740.812 828.842 L 741.116 829.329 L 742 831 L 805 831 L 804.361 829.329 L 804.044 828.841 L 803.48 827.839 C 802.826 826.864 802.107 825.936 801.406 824.995 L 798.428 821 C 797.25 819.358 796.126 817.679 795.001 816 L 791 810 L 781.667 796 L 776.344 788 L 774.424 785 L 771.308 780 L 768 775 L 764 769 L 755.333 756 C 753.553 753.33 751.796 750.642 749.974 748 L 745.72 742 C 744.567 740.35 743.451 738.674 742.333 737 L 739.692 733 L 736.576 728 L 733.449 723 L 731.139 719 L 729.305 716 L 727.333 713 C 725.564 710.34 723.763 707.699 722.053 705 C 720.174 702.033 718.425 698.985 716.576 696 L 714.05 692 L 711.576 688 L 709.05 684 L 705.947 679 C 704.879 677.317 703.771 675.66 702.667 674 L 699.333 669 C 698.23 667.342 697.116 665.691 696.064 664 L 692.471 658 L 690.532 655 L 689.333 653 C 688.378 651.345 687.538 649.627 686.533 648 C 685.899 646.972 685.22 645.979 684.514 645 L 681.569 641 C 680.429 639.368 679.391 637.669 678.309 636 L 673.692 629 L 670.576 624 L 667.449 619 L 664.55 614 C 663.946 612.983 663.299 611.992 662.655 611 L 658.692 605 L 654.947 599 L 651.71 594.025 L 650.556 592.16 L 650.019 591.159 L 649.732 590.671 L 649 589 L 582 589 M 520 633 L 518.96 634.671 L 517.562 637.045 L 512.797 645 L 510.95 648 L 508.449 652 L 505.551 657 L 502.449 662 L 499.576 667 L 497.2 671 L 495.388 674 L 493.495 677 L 490.858 681 L 485.783 689 L 484.496 691 L 482.53 694 L 479.552 699 L 477.681 701.996 L 474.654 706.714 L 473 709.286 L 470.129 714.004 C 469.121 715.61 468.049 717.172 467.142 718.839 L 466.468 720.329 L 466 722 L 578 722 L 577.1 720.329 L 576.773 719.841 L 576.144 718.839 L 573.421 714.998 L 570.579 711 L 568.424 708 L 565.671 704 L 563.691 701 L 561.142 697 L 558.505 693 L 555.309 688 C 553.352 684.977 551.33 681.996 549.333 679 L 546.692 675 L 543.576 670 L 541.681 667 L 538.576 662 L 535.424 657 L 531.189 650 L 528.05 645 C 526.811 643.02 525.613 641.016 524.425 639.005 C 523.696 637.77 523.002 636.511 522.2 635.321 L 521.546 634.517 L 521.246 634.086 L 520 633",transform:"matrix(1, 0, 0, 1, 1.4210854715202004e-14, 0)"})]})},{className:"w-4 h-4"}),label:"Black Forest Labs"},"stability-ai":{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:a||"currentColor",fillRule:"evenodd",height:"1em",width:"1em",viewBox:"0 0 24 24",className:t,children:[(0,i.jsx)("title",{children:"Stability AI"}),(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M7.223 21c4.252 0 7.018-2.22 7.018-5.56 0-2.59-1.682-4.236-4.69-4.918l-1.93-.571c-1.694-.375-2.683-.825-2.45-1.975.194-.957.773-1.497 2.122-1.497 4.285 0 5.873 1.497 5.873 1.497v-3.6S11.62 3 7.293 3C3.213 3 1 5.07 1 8.273c0 2.59 1.534 4.097 4.645 4.812l.334.083c.473.144 1.112.335 1.916.572 1.59.375 1.999.773 1.999 1.966 0 1.09-1.15 1.71-2.67 1.71C2.841 17.416 1 15.231 1 15.231v3.989S2.152 21 7.223 21z"}),(0,i.jsx)("path",{d:"M20.374 20.73c1.505 0 2.626-1.073 2.626-2.526 0-1.484-1.089-2.526-2.626-2.526-1.505 0-2.594 1.042-2.594 2.526 0 1.484 1.089 2.526 2.594 2.526z"})]})]})},{className:"w-4 h-4"}),label:"Stability AI"},"ideogram-ai":{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 900 900",width:"1rem",height:"1rem",style:{fill:"none",stroke:"currentColor",strokeWidth:68,strokeLinecap:"round",strokeLinejoin:"round"},className:t,children:[(0,i.jsx)("path",{d:"M377.87 204.445H237.224M377.87 696.305H237.224M44.007 450.582h334.226M390.122 816.411H355.82zm0-244.024c67.386 0 122.013 54.627 122.013 122.012 0 67.386-54.627 122.012-122.013 122.012m0-732.922H355.82zm0 488.898H117.421m272.701-244.874H117.421m272.701 0c9.259 0 18.276 1.88 26.944 3.834 54.421 12.267 95.069 60.9 95.069 119.028 0 67.385-54.627 122.012-122.013 122.012m0-488.898c67.386 0 122.013 54.627 122.013 122.012 0 67.386-54.627 122.012-122.013 122.012"}),(0,i.jsx)("path",{d:"M665.607 313.656c0-36.554-20.93-69.879-53.858-85.751a95.194 95.194 0 0 0-100.631 11.28m297.28-7.97a95.194 95.194 0 0 0-95.193 0 95.194 95.194 0 0 0-47.598 82.441M667.655 523.686a95.193 95.193 0 0 0-140.773-64.862l.046.02a95.03 95.03 0 0 0-16.274 11.72m157.001 53.122c8.904 42.224 45 72.918 87.63 75.374l-.017.11a95.154 95.154 0 0 0 26.509-2.166"}),(0,i.jsx)("path",{d:"M474.213 798.357a95.597 95.597 0 0 1-4.59-10.63m306.374-567.765A210.825 210.825 0 0 0 673.055 76.897a210.824 210.824 0 0 0-222.857 9.3M760.802 408.85c38.502 0 73.214-23.193 87.948-58.766 14.734-35.571 6.588-76.516-20.637-103.741a95.194 95.194 0 0 0-52.116-26.38M651.123 730.766c22.06 33.771 63.01 49.972 102.204 40.435 39.194-9.537 68.122-42.74 72.199-82.872 3.713-36.594-13.99-72.054-45.469-91.08 46.652-9.636 78.999-52.274 75.71-99.796-3.462-49.897-44.948-88.605-94.965-88.604M474.526 798.955c22.257 43.26 73.552 62.778 118.936 45.253 45.385-17.524 70.253-66.45 57.661-113.441M450.198 86.197a210.67 210.67 0 0 0-8.922 6.704"})]})},{className:"w-4 h-4"}),label:"Ideogram AI"},"minimax-ai":{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:a||"currentColor",fillRule:"evenodd",height:"1em",width:"1em",className:t,viewBox:"0 0 490.16 411.7",children:[(0,i.jsx)("title",{children:"MiniMax AI"}),(0,i.jsx)("g",{id:"layer_2","data-name":"layer 2",children:(0,i.jsx)("g",{id:"layer_1-2","data-name":"layer 1",children:(0,i.jsx)("path",{d:"M233.45,40.81a17.55,17.55,0,1,0-35.1,0V331.56a40.82,40.82,0,0,1-81.63,0V145a17.55,17.55,0,1,0-35.09,0v79.06a40.82,40.82,0,0,1-81.63,0V195.42a11.63,11.63,0,0,1,23.26,0v28.66a17.55,17.55,0,0,0,35.1,0V145A40.82,40.82,0,0,1,140,145V331.56a17.55,17.55,0,0,0,35.1,0V217.5h0V40.81a40.81,40.81,0,1,1,81.62,0V281.56a11.63,11.63,0,1,1-23.26,0Zm215.9,63.4A40.86,40.86,0,0,0,408.53,145V300.85a17.55,17.55,0,0,1-35.09,0v-260a40.82,40.82,0,0,0-81.63,0V370.89a17.55,17.55,0,0,1-35.1,0V330a11.63,11.63,0,1,0-23.26,0v40.86a40.81,40.81,0,0,0,81.62,0V40.81a17.55,17.55,0,0,1,35.1,0v260a40.82,40.82,0,0,0,81.63,0V145a17.55,17.55,0,1,1,35.1,0V281.56a11.63,11.63,0,0,0,23.26,0V145A40.85,40.85,0,0,0,449.35,104.21Z"})})})]})},{className:"w-4 h-4"}),label:"MiniMax AI"},recraft:{icon:(0,i.jsx)(e=>{let{fill:a,className:t}=e,{theme:l}=(0,n.useTheme)();return(0,i.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:[(0,i.jsx)("rect",{width:"80",height:"80",rx:"16",fill:"light"===l?"currentColor":"black"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_939_3624)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56.5598 30.7427C56.5598 20.5679 47.3209 12.3191 35.9236 12.3191C31.9709 12.3191 28.7689 20.5679 28.7689 30.7427C28.7689 33.2879 28.9686 35.7139 29.3326 37.9205H22.3261L15.0006 63.5218H35.9268V49.1694C47.3209 49.1694 56.5566 40.9174 56.5566 30.7459L56.5598 30.7427ZM35.9236 15.6935C37.9917 15.6935 39.6668 22.4325 39.6668 30.7427C39.6668 39.0528 37.9917 45.7918 35.9236 45.7918C33.8554 45.7918 32.1803 39.0528 32.1803 30.7427C32.1803 22.4325 33.8554 15.6935 35.9236 15.6935Z",fill:"light"===l?"white":"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56.9625 49.1694H35.9462L44.0061 63.525H65.0192L56.9625 49.1694Z",fill:"light"===l?"white":"currentColor"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_939_3624",children:(0,i.jsx)("rect",{width:"50.0186",height:"51.2059",fill:"light"===l?"white":"currentColor",transform:"translate(15.0002 12.3191)"})})})]})},{className:"w-4 h-4"}),label:"Recraft"}}},72571:(e,a,t)=>{t.d(a,{CP:()=>s,ap:()=>r}),t(25642);var i=t(39032),l=t(23464);let n=async(e,a,t)=>{let n={"xi-api-key":i._.elevenLabsKey()};return await l.A.post("https://api.elevenlabs.io/v1/text-to-speech/".concat(a),{text:e,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.5}},{headers:n,responseType:t})},s=async(e,a)=>{let t=await n(e,a,"blob");return new Audio(URL.createObjectURL(t.data))},r=async(e,a)=>{(await s(e,a)).play()}},73070:(e,a,t)=>{t.d(a,{R:()=>s});var i=t(91163),l=t(65453);let n=async(e,a)=>{let t={page:e>0?e:void 0,a:a.aiIds.length>0?a.aiIds.join(","):void 0,m:a.modelIds.length>0?a.modelIds.join(","):void 0},l=i.A.stringifyUrl({url:"/api/v1/me/chats",query:t},{skipNull:!0}),n=await fetch(l);return 200===n.status?(await n.json()).data:[]},s=(0,l.v)((e,a)=>({chats:[],loading:!1,loaded:!1,page:0,hasMore:!0,filters:{aiIds:[],modelIds:[]},fetchChats:async()=>{if(!0!==a().loading){e({loading:!0});try{let t=a().page,i=a().filters,l=await n(t,i);0===l.length&&e({hasMore:!1}),t>0?e(e=>({chats:[...e.chats,...l]})):e({chats:l})}finally{e({loading:!1,loaded:!0})}}},nextPage:()=>{e(e=>({page:e.page+1})),a().fetchChats()},reloadChats:()=>{e(e=>({page:0})),a().fetchChats()},addChat:t=>{a().chats.find(e=>e.id===t.id)||e(e=>({chats:[...e.chats,t]}))},setChats:a=>{e({chats:a,page:0,hasMore:a.length>0,loaded:!0})},setFilters:t=>{e({filters:t,page:0}),a().fetchChats()}}))},77487:(e,a,t)=>{t.d(a,{G:()=>s});var i=t(23464),l=t(65453);let n=null,s=(0,l.v)((e,a)=>({models:[],loading:!1,fetchModels:async()=>n||(a().models&&a().models.length>0?a().models:n=(async()=>{e({loading:!0});try{let a=await i.A.get("/api/v1/ai-models").then(e=>e.data.data);if(a)return e({models:a,loading:!1}),a;return[]}finally{n=null,e({loading:!1})}})()),setModels:a=>{e({models:a})}}))},78857:(e,a,t)=>{t.d(a,{BB:()=>l,FS:()=>n,YC:()=>i});var i=function(e){return e.FREE="FREE",e.PERSONAL="PERSONAL",e.BUSINESS="BUSINESS",e.ENTERPRISE="ENTERPRISE",e}({}),l=function(e){return e.ACTIVE="ACTIVE",e.CANCELLED="CANCELLED",e}({}),n=function(e){return e.STRIPE="STRIPE",e.APPDIRECT="APPDIRECT",e}({})},87700:(e,a,t)=>{t.d(a,{fJ:()=>o,rC:()=>r});var i=t(61555);t(25642);var l=t(39032),n=t(23464);let s=async(e,a,t)=>{let s={"Ocp-Apim-Subscription-Key":l._.microsoftVoiceKey(),"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"riff-24khz-16bit-mono-pcm"},r=i.mp.find(e=>e.id===a);if(!r)throw Error("Voice not found");return await n.A.post("https://westus2.tts.speech.microsoft.com/cognitiveservices/v1","<speak version='1.0' xml:lang='en-US'>\n      <voice xml:lang='en-US' xml:gender='".concat(r.gender,"' name='").concat(r.id,"'>\n        ").concat(e,"\n      </voice>\n    </speak>"),{headers:s,responseType:t})},r=async(e,a)=>{let t=await s(e,a,"blob");return new Audio(URL.createObjectURL(t.data))},o=async(e,a)=>{(await r(e,a)).play()}}}]);