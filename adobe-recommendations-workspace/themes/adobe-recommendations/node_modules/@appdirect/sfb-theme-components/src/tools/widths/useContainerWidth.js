import { useRef, useState, useEffect } from 'react';

const DEFAULT_CONTAINER_WIDTH = 0;
/**
 * Custom hook used to check the width of a referenced component
 * on a window resize event
 * @returns {array} - Reference object and the width of the referenced component
 */
export const useContainerWidth = () => {
    const containerRef = useRef({});

    const [containerWidth, setContainerWidth] = useState(DEFAULT_CONTAINER_WIDTH);

    useEffect(() => {
        const updateSize = () => {
            const { current } = containerRef;
            const { clientWidth } = current || { clientWidth: DEFAULT_CONTAINER_WIDTH };

            setContainerWidth(clientWidth);
        };

        window.addEventListener('resize', updateSize);

        updateSize();

        return () => window.removeEventListener('resize', updateSize);
    }, []);

    return [containerRef, containerWidth];
};
