import { NO_MASK, INSET_SQUARE_MASK, CIRCLE_MASK, INSET_CIRCLE_MASK } from '../constants/components/schemas/image-masks';

const getImageMask = (imageMask, imageRef) => {
    const domImageRef = imageRef.current;
    if (imageMask === NO_MASK.value || !domImageRef) { return ''; }

    const width = domImageRef.offsetWidth;
    const height = domImageRef.offsetHeight;
    const minValue = width < height ? width : height;
    let maskFunction = '';
    let maskValue = '';

    const getInsetSquareDimensions = dimension => Math.round((dimension - dimension * 0.74) / 2);

    switch (imageMask) {
        case CIRCLE_MASK.value:
            maskFunction = 'circle';
            maskValue = `(${Math.round(minValue / 2)}px)`;
            break;
        case INSET_CIRCLE_MASK.value:
            maskFunction = 'circle';
            maskValue = `(${Math.round((minValue / 2) * 0.74)}px)`;
            break;
        case INSET_SQUARE_MASK.value:
            maskFunction = 'inset';
            maskValue = `(${getInsetSquareDimensions(height)}px ${getInsetSquareDimensions(width)}px)`;
            break;
        default:
            break;
    }

    return `${maskFunction}${maskValue}`;
};

export default getImageMask;
