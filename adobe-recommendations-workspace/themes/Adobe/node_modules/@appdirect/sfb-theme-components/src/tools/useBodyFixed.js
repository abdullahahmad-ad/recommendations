import { useEffect, useState } from 'react';

const fixedClass = 'fixed';

export const useBodyFixed = (isFixed, rememberScrollPosition) => {
    const [isBodyFixedActive, setBodyFixedActive] = useState(false);
    const [windowTopPosition, setWindowTopPosition] = useState(0);

    useEffect(() => {
        if (isFixed) {
            if (window.scrollY) {
                setWindowTopPosition(window.scrollY);
            }
            document.body.classList.add(fixedClass);
            setBodyFixedActive(true);
        } else if (isBodyFixedActive) {
            document.body.classList.remove(fixedClass);
            if (rememberScrollPosition) {
                window.scrollTo(0, windowTopPosition);
            }
            setBodyFixedActive(false);
        }

        return () => {
            document.body.classList.remove(fixedClass);
        };
    }, [isFixed, isBodyFixedActive, windowTopPosition, rememberScrollPosition]);
};
