import { useState } from 'react';

const getHtmlInputValue = e => e.target.value;

export const useControlledInput = (value, onChange, getValueFromChange = getHtmlInputValue) => {
    const [stateValue, setValue] = useState(value || '');

    // if value is provided, component is controlled, and must have an onChange
    const finalOnChange = e => {
        if (onChange) {
            onChange(e);
        } else {
            const newValue = getValueFromChange(e);
            setValue(newValue);
        }
    };

    const finalValue = value !== null && value !== undefined ? value : stateValue;
    return [finalValue, finalOnChange];
};
